nohup: 忽略输入
Using TensorFlow backend.
('b', [10, None, 50])
starting loading data
2018-11-17 10:21:45
finish loading data
2018-11-17 10:24:24
('batch_num', 15625)
('configurations', {'save_path': 'cnn_test/douban', '_EOS_': 1, 'data_path': '../../data/douban/data.pkl', 'max_turn_num': 10, 'batch_size': 64, 'evaluate_step': 15625, 'filter_size': 8, 'final_n_class': 1, 'filter_h': 3, 'train_steps': 78125, 'max_turn_len': 50, 'embedding_file': '../../data/douban/word_embedding.pkl', 'epoch': 5, 'output_path': 'output/douban', 'init_model': 'model/douban', 'print_step': 1562})
2018-11-17 10:24:27.005954: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.1 instructions, but these are available on your machine and could speed up CPU computations.
2018-11-17 10:24:27.005971: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use SSE4.2 instructions, but these are available on your machine and could speed up CPU computations.
2018-11-17 10:24:27.005975: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX instructions, but these are available on your machine and could speed up CPU computations.
2018-11-17 10:24:27.005978: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use AVX2 instructions, but these are available on your machine and could speed up CPU computations.
2018-11-17 10:24:27.005981: W tensorflow/core/platform/cpu_feature_guard.cc:45] The TensorFlow library wasn't compiled to use FMA instructions, but these are available on your machine and could speed up CPU computations.
2018-11-17 10:24:27.118530: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:893] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2018-11-17 10:24:27.118952: I tensorflow/core/common_runtime/gpu/gpu_device.cc:940] Found device 0 with properties: 
name: GeForce GTX 1070
major: 6 minor: 1 memoryClockRate (GHz) 1.683
pciBusID 0000:01:00.0
Total memory: 7.92GiB
Free memory: 7.79GiB
2018-11-17 10:24:27.118964: I tensorflow/core/common_runtime/gpu/gpu_device.cc:961] DMA: 0 
2018-11-17 10:24:27.118968: I tensorflow/core/common_runtime/gpu/gpu_device.cc:971] 0:   Y 
2018-11-17 10:24:27.118974: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1070, pci bus id: 0000:01:00.0)
starting shuffle train data
finish building train data
2018-11-17 10:25:55.850882: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 13566 get requests, put_count=5689 evicted_count=1000 eviction_rate=0.175778 and unsatisfied allocation rate=0.661728
2018-11-17 10:25:55.850912: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 100 to 110
2018-11-17 10:25:56.090043: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 2167 get requests, put_count=3022 evicted_count=1000 eviction_rate=0.330907 and unsatisfied allocation rate=0.0733733
2018-11-17 10:25:56.090074: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 160 to 176
2018-11-17 10:25:56.348237: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 4499 get requests, put_count=6502 evicted_count=2000 eviction_rate=0.307598 and unsatisfied allocation rate=0.00400089
2018-11-17 10:25:56.348269: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 233 to 256
2018-11-17 10:25:56.580555: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 5851 get requests, put_count=9876 evicted_count=4000 eviction_rate=0.405022 and unsatisfied allocation rate=0
2018-11-17 10:25:56.813830: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 5089 get requests, put_count=10117 evicted_count=5000 eviction_rate=0.494218 and unsatisfied allocation rate=0
2018-11-17 10:25:57.066273: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 6619 get requests, put_count=13649 evicted_count=7000 eviction_rate=0.512858 and unsatisfied allocation rate=0
2018-11-17 10:25:57.417847: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 19033 get requests, put_count=18747 evicted_count=8000 eviction_rate=0.426735 and unsatisfied allocation rate=0.437083
2018-11-17 10:25:57.417879: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 372 to 409
2018-11-17 10:25:57.690615: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 4558 get requests, put_count=6598 evicted_count=2000 eviction_rate=0.303122 and unsatisfied allocation rate=0
2018-11-17 10:25:57.921341: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 5467 get requests, put_count=9511 evicted_count=4000 eviction_rate=0.420566 and unsatisfied allocation rate=0
2018-11-17 10:25:58.150623: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 6367 get requests, put_count=12416 evicted_count=6000 eviction_rate=0.483247 and unsatisfied allocation rate=0
2018-11-17 10:25:58.381735: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 4450 get requests, put_count=11504 evicted_count=7000 eviction_rate=0.608484 and unsatisfied allocation rate=0
2018-11-17 10:25:58.759533: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 2689 get requests, put_count=3754 evicted_count=1000 eviction_rate=0.266383 and unsatisfied allocation rate=0
2018-11-17 10:25:59.001667: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 3023 get requests, put_count=6095 evicted_count=3000 eviction_rate=0.492207 and unsatisfied allocation rate=0
2018-11-17 10:25:59.238864: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 3179 get requests, put_count=8258 evicted_count=5000 eviction_rate=0.605473 and unsatisfied allocation rate=0
2018-11-17 10:25:59.598459: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 20548 get requests, put_count=20885 evicted_count=8000 eviction_rate=0.38305 and unsatisfied allocation rate=0.377166
2018-11-17 10:25:59.598490: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 958 to 1053
2018-11-17 10:25:59.865657: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 2090 get requests, put_count=4195 evicted_count=2000 eviction_rate=0.476758 and unsatisfied allocation rate=0
2018-11-17 10:26:00.106784: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 3877 get requests, put_count=8992 evicted_count=5000 eviction_rate=0.55605 and unsatisfied allocation rate=0
2018-11-17 10:26:00.502904: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 19525 get requests, put_count=19390 evicted_count=7000 eviction_rate=0.361011 and unsatisfied allocation rate=0.371933
2018-11-17 10:26:00.502937: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 1400 to 1540
2018-11-17 10:26:00.753204: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 1793 get requests, put_count=4947 evicted_count=3000 eviction_rate=0.606428 and unsatisfied allocation rate=0
2018-11-17 10:26:01.007893: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 2221 get requests, put_count=8390 evicted_count=6000 eviction_rate=0.715137 and unsatisfied allocation rate=0
2018-11-17 10:26:01.425072: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 1596 get requests, put_count=4800 evicted_count=3000 eviction_rate=0.625 and unsatisfied allocation rate=0
2018-11-17 10:26:01.838834: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 19778 get requests, put_count=19817 evicted_count=6000 eviction_rate=0.30277 and unsatisfied allocation rate=0.312772
2018-11-17 10:26:01.838873: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:259] Raising pool_size_limit_ from 2478 to 2725
2018-11-17 10:26:02.105237: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 1265 get requests, put_count=5537 evicted_count=4000 eviction_rate=0.722413 and unsatisfied allocation rate=0
2018-11-17 10:26:02.539535: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 978 get requests, put_count=4307 evicted_count=3000 eviction_rate=0.696541 and unsatisfied allocation rate=0
2018-11-17 10:26:03.002161: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 1002 get requests, put_count=4400 evicted_count=3000 eviction_rate=0.681818 and unsatisfied allocation rate=0
2018-11-17 10:26:03.677431: I tensorflow/core/common_runtime/gpu/pool_allocator.cc:247] PoolAllocator: After 748 get requests, put_count=3278 evicted_count=2000 eviction_rate=0.610128 and unsatisfied allocation rate=0
('epoch=0', 'step:', 1562, 'loss', 0.49374294, 'processed: [0.099968]')
('epoch=0', 'step:', 3124, 'loss', 0.52791494, 'processed: [0.199936]')
('epoch=0', 'step:', 4686, 'loss', 0.3715213, 'processed: [0.299904]')
('epoch=0', 'step:', 6248, 'loss', 0.3369663, 'processed: [0.399872]')
('epoch=0', 'step:', 7810, 'loss', 0.40412396, 'processed: [0.49984]')
('epoch=0', 'step:', 9372, 'loss', 0.37526858, 'processed: [0.599808]')
('epoch=0', 'step:', 10934, 'loss', 0.3670015, 'processed: [0.699776]')
('epoch=0', 'step:', 12496, 'loss', 0.28701437, 'processed: [0.799744]')
('epoch=0', 'step:', 14058, 'loss', 0.38852698, 'processed: [0.899712]')
('epoch=0', 'step:', 15620, 'loss', 0.3046867, 'processed: [0.99968]')
save evaluate_step: 1
2018-11-17 11:23:55
starting shuffle train data
finish building train data
('epoch=1', 'step:', 17182, 'loss', 0.3931949, 'processed: [1.099648]')
('epoch=1', 'step:', 18744, 'loss', 0.38626832, 'processed: [1.199616]')
('epoch=1', 'step:', 20306, 'loss', 0.33411852, 'processed: [1.299584]')
('epoch=1', 'step:', 21868, 'loss', 0.3286809, 'processed: [1.399552]')
('epoch=1', 'step:', 23430, 'loss', 0.32983485, 'processed: [1.49952]')
('epoch=1', 'step:', 24992, 'loss', 0.44972873, 'processed: [1.599488]')
('epoch=1', 'step:', 26554, 'loss', 0.36655587, 'processed: [1.699456]')
('epoch=1', 'step:', 28116, 'loss', 0.26905566, 'processed: [1.799424]')
('epoch=1', 'step:', 29678, 'loss', 0.19495955, 'processed: [1.899392]')
('epoch=1', 'step:', 31240, 'loss', 0.49354714, 'processed: [1.99936]')
save evaluate_step: 2
2018-11-17 12:22:46
0.34369296
epoch=1 save model
2018-11-17 12:22:47
starting shuffle train data
finish building train data
('epoch=2', 'step:', 32802, 'loss', 0.27594465, 'processed: [2.099328]')
('epoch=2', 'step:', 34364, 'loss', 0.35933673, 'processed: [2.199296]')
('epoch=2', 'step:', 35926, 'loss', 0.37934363, 'processed: [2.299264]')
('epoch=2', 'step:', 37488, 'loss', 0.26556402, 'processed: [2.399232]')
('epoch=2', 'step:', 39050, 'loss', 0.24174741, 'processed: [2.4992]')
('epoch=2', 'step:', 40612, 'loss', 0.40256476, 'processed: [2.599168]')
('epoch=2', 'step:', 42174, 'loss', 0.37055483, 'processed: [2.699136]')
('epoch=2', 'step:', 43736, 'loss', 0.2713716, 'processed: [2.799104]')
('epoch=2', 'step:', 45298, 'loss', 0.2915509, 'processed: [2.899072]')
('epoch=2', 'step:', 46860, 'loss', 0.24569316, 'processed: [2.99904]')
save evaluate_step: 3
2018-11-17 13:21:41
0.33180112
epoch=2 save model
2018-11-17 13:21:42
starting shuffle train data
finish building train data
('epoch=3', 'step:', 48422, 'loss', 0.3449933, 'processed: [3.099008]')
('epoch=3', 'step:', 49984, 'loss', 0.38883364, 'processed: [3.198976]')
('epoch=3', 'step:', 51546, 'loss', 0.3676381, 'processed: [3.298944]')
('epoch=3', 'step:', 53108, 'loss', 0.28476506, 'processed: [3.398912]')
('epoch=3', 'step:', 54670, 'loss', 0.27906656, 'processed: [3.49888]')
('epoch=3', 'step:', 56232, 'loss', 0.28735676, 'processed: [3.598848]')
('epoch=3', 'step:', 57794, 'loss', 0.33037242, 'processed: [3.698816]')
('epoch=3', 'step:', 59356, 'loss', 0.39484674, 'processed: [3.798784]')
('epoch=3', 'step:', 60918, 'loss', 0.34747958, 'processed: [3.898752]')
('epoch=3', 'step:', 62480, 'loss', 0.23697105, 'processed: [3.99872]')
save evaluate_step: 4
2018-11-17 14:20:40
0.28486264
epoch=3 save model
2018-11-17 14:20:40
starting shuffle train data
finish building train data
('epoch=4', 'step:', 64042, 'loss', 0.37908468, 'processed: [4.098688]')
('epoch=4', 'step:', 65604, 'loss', 0.21307725, 'processed: [4.198656]')
('epoch=4', 'step:', 67166, 'loss', 0.36853486, 'processed: [4.298624]')
('epoch=4', 'step:', 68728, 'loss', 0.34702694, 'processed: [4.398592]')
('epoch=4', 'step:', 70290, 'loss', 0.22886407, 'processed: [4.49856]')
('epoch=4', 'step:', 71852, 'loss', 0.40864837, 'processed: [4.598528]')
('epoch=4', 'step:', 73414, 'loss', 0.1661706, 'processed: [4.698496]')
('epoch=4', 'step:', 74976, 'loss', 0.25317836, 'processed: [4.798464]')
('epoch=4', 'step:', 76538, 'loss', 0.2841393, 'processed: [4.898432]')
('epoch=4', 'step:', 78100, 'loss', 0.18425938, 'processed: [4.9984]')
save evaluate_step: 5
2018-11-17 15:19:32
0.2784932
epoch=4 save model
2018-11-17 15:19:33
beging test starting loading data
2018-11-17 15:19:37
finish loading data
finish building test batches
2018-11-17 15:22:27
2018-11-17 15:22:27.795830: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 1070, pci bus id: 0000:01:00.0)
sucess init model/douban
total num: 665
MAP: 0.534249177128
MRR: 0.576835541234
P@1: 0.387969924812
('R10_1:', 0.23385487528344662)
('R10_2', 0.4019238572622031)
('R10_5', 0.7523117317102281)
